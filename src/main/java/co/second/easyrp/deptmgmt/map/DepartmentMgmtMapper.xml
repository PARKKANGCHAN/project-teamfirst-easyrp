<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.second.easyrp.deptmgmt.map.DepartmentMgmtMapper">
	
	<select id="departmentTableAllList" parameterType="co.second.easyrp.deptmgmt.service.SearchVO" resultType="co.second.easyrp.deptmgmt.service.DepartmentMgmtVO">
		SELECT cod, name, wrkname, location
		FROM department
		WHERE DELETEYN = 'N'
		<if test="searchCod != null and searchCod != ''">
			AND cod = #{searchCod}
		</if>
		<if test="searchName != null and searchName != ''">
			AND name LIKE CONCAT('%', #{searchName}, '%')
		</if>
		<if test="searchWrkName != null and searchWrkName != ''">
			AND wrkname LIKE CONCAT('%', #{searchWrkName}, '%')
		</if>
		<if test="searchLocation != null and searchLocation != ''">
			AND location LIKE CONCAT('%', #{searchLocation}, '%')
		</if>
		ORDER BY cod DESC
		LIMIT #{pageSize} OFFSET #{offset}
	</select>
	
	<select id="countDepartmentTable" parameterType="co.second.easyrp.deptmgmt.service.SearchVO" resultType="int">
		SELECT COUNT(*)
		FROM department
		WHERE DELETEYN = 'N'
		<if test="searchCod != null and searchCod != ''">
			AND cod = #{searchCod}
		</if>
		<if test="searchName != null and searchName != ''">
			AND name LIKE CONCAT('%', #{searchName}, '%')
		</if>
		<if test="searchWrkName != null and searchWrkName != ''">
			AND wrkname LIKE CONCAT('%', #{searchWrkName}, '%')
		</if>
		<if test="searchLocation != null and searchLocation != ''">
			AND location LIKE CONCAT('%', #{searchLocation}, '%')
		</if>
	</select>
	
	
</mapper>