<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.second.easyrp.productmgmt.map.UnitMapper">

	<!-- (2024년 5월 8일 오후 2시 37분 박현우) -->

	<!-- Unit 데이터베이스 테이블에 삭제되지 않은 값을 가져오기 위한 쿼리 -->
	<select id="unitTableAllList" resultType="co.second.easyrp.productmgmt.service.UnitVO">
		SELECT cod, name, deleteyn
		FROM unit
		ORDER BY cod DESC
	</select>
	
	<!-- Unit 데이터베이스 테이블에 값을 삽입하기 위한 쿼리 -->
	<insert id="unitInsertFn"
		parameterType="co.second.easyrp.productmgmt.service.UnitVO">
		INSERT INTO unit (
		cod,
		name)
		VALUES(
		#{cod},
		#{name}
		);
	</insert>

	<select id="getClientData"
		resultType="co.second.easyrp.client.service.ClientVO">
		SELECT * FROM client WHERE cod = #{cod}
	</select>

	<select id="countClientTable"
		parameterType="co.second.easyrp.client.service.SearchVO"
		resultType="int">
		SELECT COUNT(*)
		FROM client
		WHERE DELETEYN = 'N'
		<if test="searchCod != null and searchCod != ''">
			AND cod = #{searchCod}
		</if>
		<if test="searchName != null and searchName != ''">
			AND name LIKE CONCAT('%', #{searchName}, '%')
		</if>
		<if test="searchAddress != null and searchAddress != ''">
			AND address LIKE CONCAT('%', #{searchAddress}, '%')
		</if>
		<if
			test="searchRepresentative != null and searchRepresentative != ''">
			AND representative LIKE CONCAT('%', #{searchRepresentative}, '%')
		</if>
		<if test="searchManagerName != null and searchManagerName != ''">
			AND manager_name LIKE CONCAT('%', #{searchManagerName}, '%')
		</if>
	</select>



	<update id="clientUpdateFn"
		parameterType="co.second.easyrp.client.service.ClientVO">
		UPDATE client
		SET
		name = #{name},
		representative = #{representative},
		faxnum = #{faxnum},
		address = #{address},
		postcode = #{postcode},
		manager_name = #{managerName},
		manager_tel = #{managerTel},
		discount_class = #{discountClass}
		WHERE cod = #{cod};
	</update>

	<update id="clientDeleteFn"
		parameterType="co.second.easyrp.client.service.ClientVO">
		UPDATE client
		SET
		DELETEYN = 'Y'
		WHERE cod = #{cod};
	</update>
	
	<select id="getDiscountData" resultType="co.second.easyrp.client.service.discountVO">
	  SELECT num, class as 'className', discrate
	  FROM discount
	  where deleteyn = 'N';
	</select>


</mapper>